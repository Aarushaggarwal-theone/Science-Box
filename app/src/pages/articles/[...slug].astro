---
import type { GetStaticPaths } from "astro";
import articles from '../../content';
import Layout from '../../layouts/Layout.astro';

interface Article {
  id: number;
  attributes: {
    title: string;
    content: string;
    author: string;
    createdAt: string;
    slug: string;
  };
}

export async function getStaticPaths() {
  const paths = articles.map((article: Article) => ({
    params: { slug: article.attributes.slug }
  }));

  return paths;
}

const { slug } = Astro.params;
const article = articles.find((article: Article) => article.attributes.slug === slug);

if (!article) {
  return Astro.redirect('/404');
}
---

<Layout>
  <article class="max-w-4xl mx-auto p-4">
    <h1 class="text-4xl font-bold mb-4">{article.attributes.title}</h1>
    <p class="text-gray-600 mb-6">
      By {article.attributes.author} on {new Date(article.attributes.createdAt).toLocaleDateString()}
    </p>
    <div class="prose max-w-none">
      {article.attributes.content}
    </div>
  </article>
</Layout>